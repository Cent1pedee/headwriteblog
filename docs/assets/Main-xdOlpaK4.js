import{u as y}from"./vuex-pSKjaR-l.js";import{u as w}from"./vue-router-DiHizWL_.js";import{a as k,o as r,b as i,e as t,i as m,g as _,aZ as h,w as F,aN as S,c as L,F as C,h as N}from"./@vue-lOnTnxK0.js";import{_ as v}from"./index-BJyQTE1r.js";import"./@kangc-Bq-qZeZY.js";import"./@babel-BgIvLCQ5.js";import"./vue-DSBOYS3C.js";import"./@vuepress-3yONQRlZ.js";import"./copy-to-clipboard-C0dvYkVd.js";import"./toggle-selection-DGa8lynz.js";import"./highlight.js-DsdEMM-1.js";import"./v-preview-image-C-CQwJSm.js";const l=k({isLoading:!1,show(u="加载中..."){this.isLoading=!0,this.message=u},hide(){this.isLoading=!1,this.message=""},message:""}),$={setup(){return{loadingState:l}}},b={key:0,class:"loading-overlay"},M={class:"loading-content"};function x(u,o,d,a,n,p){return a.loadingState.isLoading?(r(),i("div",b,[t("div",M,[o[0]||(o[0]=t("div",{class:"spinner"},null,-1)),t("p",null,m(a.loadingState.message),1)])])):_("",!0)}const A=v($,[["render",x]]),D={class:"blog-container"},B={key:0,class:"blog-list"},I=["onClick"],R={__name:"Main",setup(u){const o=y(),d=w(),a=h([]),n=h(!1),p=()=>{const e=sessionStorage.getItem("markdownFiles");return e?JSON.parse(e):null},g=async()=>{o.state.markdownFiles.length===0&&await o.dispatch("loadMarkdownFiles");const e=p();e?a.value=e:(a.value=o.state.markdownFiles.map(s=>({name:s.name,date:s.created,title:s.title,daysAgo:s.daysAgo})),sessionStorage.setItem("markdownFiles",JSON.stringify(a.value)))},f=e=>{d.push({name:"Content",params:{title:e.title,date:e.date}})};return F(()=>d.currentRoute.value,async()=>{l.show("正在加载页面..."),n.value=!1;try{d.currentRoute.value.name==="Main"&&await g()}finally{l.hide(),n.value=!0}}),S(async()=>{l.show("正在加载页面...");try{await g()}catch{console.error("加载失败")}finally{l.hide(),n.value=!0}}),(e,s)=>(r(),i("div",D,[s[0]||(s[0]=t("header",{class:"blog-header"},[t("h1",null,"江湖夜雨十年灯"),t("p",null,"一壶浊酒尽余欢，今宵别梦寒。")],-1)),L(A),n.value?(r(),i("ul",B,[(r(!0),i(C,null,N(a.value,c=>(r(),i("li",{key:c.name,onClick:V=>f(c)},[t("h2",null,m(c.title),1),t("p",null,m(c.daysAgo)+" 天前",1)],8,I))),128))])):_("",!0)]))}},Q=v(R,[["__scopeId","data-v-deffd7da"]]);export{Q as default};
