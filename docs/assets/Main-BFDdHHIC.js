import{u as y}from"./vuex-CaVwDJ_B.js";import{u as k}from"./vue-router-BW_ZDU7d.js";import{aQ as w,aK as r,u as i,v as t,b9 as m,t as _,aS as h,bC as S,aC as F,I as C,F as L,aV as b}from"./@vue-CyONiH4Q.js";import{_ as v}from"./index-C7Arnz7w.js";import"./@kangc-B4Z1SF_7.js";import"./@babel-BgIvLCQ5.js";import"./vue-D9C6ewVo.js";import"./@vuepress-3yONQRlZ.js";import"./copy-to-clipboard-C0dvYkVd.js";import"./toggle-selection-DGa8lynz.js";import"./highlight.js-DsdEMM-1.js";const l=w({isLoading:!1,show(u="加载中..."){this.isLoading=!0,this.message=u},hide(){this.isLoading=!1,this.message=""},message:""}),$={setup(){return{loadingState:l}}},M={key:0,class:"loading-overlay"},N={class:"loading-content"};function x(u,o,d,a,n,p){return a.loadingState.isLoading?(r(),i("div",M,[t("div",N,[o[0]||(o[0]=t("div",{class:"spinner"},null,-1)),t("p",null,m(a.loadingState.message),1)])])):_("",!0)}const A=v($,[["render",x]]),D={class:"blog-container"},I={key:0,class:"blog-list"},V=["onClick"],B={__name:"Main",setup(u){const o=y(),d=k(),a=h([]),n=h(!1),p=()=>{const e=sessionStorage.getItem("markdownFiles");return e?JSON.parse(e):null},g=async()=>{o.state.markdownFiles.length===0&&await o.dispatch("loadMarkdownFiles");const e=p();e?a.value=e:(a.value=o.state.markdownFiles.map(s=>({name:s.name,date:s.created,title:s.title,daysAgo:s.daysAgo})),sessionStorage.setItem("markdownFiles",JSON.stringify(a.value)))},f=e=>{d.push({name:"Content",params:{title:e.title,date:e.date}})};return S(()=>d.currentRoute.value,async()=>{l.show("正在加载页面..."),n.value=!1;try{d.currentRoute.value.name==="Main"&&await g()}finally{l.hide(),n.value=!0}}),F(async()=>{l.show("正在加载页面...");try{await g()}catch{console.error("加载失败")}finally{l.hide(),n.value=!0}}),(e,s)=>(r(),i("div",D,[s[0]||(s[0]=t("header",{class:"blog-header"},[t("h1",null,"江湖夜雨十年灯"),t("p",null,"一壶浊酒尽余欢，今宵别梦寒。")],-1)),C(A),n.value?(r(),i("ul",I,[(r(!0),i(L,null,b(a.value,c=>(r(),i("li",{key:c.name,onClick:R=>f(c)},[t("h2",null,m(c.title),1),t("p",null,m(c.daysAgo)+" 天前",1)],8,V))),128))])):_("",!0)]))}},P=v(B,[["__scopeId","data-v-deffd7da"]]);export{P as default};
