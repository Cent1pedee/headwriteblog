import{u as y}from"./vuex-CaVwDJ_B.js";import{u as k}from"./vue-router-BW_ZDU7d.js";import{aQ as w,aK as r,u as i,v as a,b9 as m,t as _,aS as h,bC as S,aC as F,I as C,F as L,aV as b}from"./@vue-CyONiH4Q.js";import{_ as v}from"./index-CP4rerPo.js";import"./@kangc-QVtZqLqe.js";import"./vue-B4DRRuLj.js";import"./highlight.js-Cv3Vwp5p.js";const l=w({isLoading:!1,show(u="加载中..."){this.isLoading=!0,this.message=u},hide(){this.isLoading=!1,this.message=""},message:""}),$={setup(){return{loadingState:l}}},M={key:0,class:"loading-overlay"},N={class:"loading-content"};function x(u,o,d,t,n,g){return t.loadingState.isLoading?(r(),i("div",M,[a("div",N,[o[0]||(o[0]=a("div",{class:"spinner"},null,-1)),a("p",null,m(t.loadingState.message),1)])])):_("",!0)}const A=v($,[["render",x]]),D={class:"blog-container"},I={key:0,class:"blog-list"},V=["onClick"],B={__name:"Main",setup(u){const o=y(),d=k(),t=h([]),n=h(!1),g=()=>{const e=sessionStorage.getItem("markdownFiles");return e?JSON.parse(e):null},p=async()=>{o.state.markdownFiles.length===0&&await o.dispatch("loadMarkdownFiles");const e=g();e?t.value=e:(t.value=o.state.markdownFiles.map(s=>({name:s.name,date:s.created,title:s.title,daysAgo:s.daysAgo})),sessionStorage.setItem("markdownFiles",JSON.stringify(t.value)))},f=e=>{d.push({name:"Content",params:{title:e.title,date:e.date}})};return S(()=>d.currentRoute.value,async()=>{l.show("正在加载页面..."),n.value=!1;try{d.currentRoute.value.name==="Main"&&await p()}finally{l.hide(),n.value=!0}}),F(async()=>{l.show("正在加载页面...");try{await p()}catch{console.error("加载失败")}finally{l.hide(),n.value=!0}}),(e,s)=>(r(),i("div",D,[s[0]||(s[0]=a("header",{class:"blog-header"},[a("h1",null,"江湖夜雨十年灯"),a("p",null,"一壶浊酒尽余欢，今宵别梦寒。")],-1)),C(A),n.value?(r(),i("ul",I,[(r(!0),i(L,null,b(t.value,c=>(r(),i("li",{key:c.name,onClick:R=>f(c)},[a("h2",null,m(c.title),1),a("p",null,m(c.daysAgo)+" 天前",1)],8,V))),128))])):_("",!0)]))}},j=v(B,[["__scopeId","data-v-deffd7da"]]);export{j as default};
