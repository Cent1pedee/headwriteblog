import{F as I}from"./v-preview-image-C-CQwJSm.js";import{a as N}from"./vue-router-DiHizWL_.js";import{u as T}from"./vuex-pSKjaR-l.js";import{_ as F}from"./index-BJyQTE1r.js";import{aZ as f,aN as k,aE as w,w as B,b as d,F as D,h as E,g as b,e as m,i as u,P as L,b0 as O,o as i,n as R}from"./@vue-lOnTnxK0.js";import"./@kangc-Bq-qZeZY.js";import"./@babel-BgIvLCQ5.js";import"./vue-DSBOYS3C.js";import"./@vuepress-3yONQRlZ.js";import"./copy-to-clipboard-C0dvYkVd.js";import"./toggle-selection-DGa8lynz.js";import"./highlight.js-DsdEMM-1.js";const q={setup(){const l=N(),v=T(),o=f({title:l.params.title||"无标题",date:l.params.date||"未知日期",content:""}),t=f([]),p=f(null),_=f(!0),h=()=>{_.value=window.innerWidth>=1024};window.addEventListener("resize",h),k(h);const c=e=>{const n=sessionStorage.getItem(`article-${e}`);return n?JSON.parse(n):null},g=()=>{console.log("复制成功")},y=async e=>{const n=c(e);if(n)o.value=n;else{const s=v.state.markdownFiles.find(a=>a.title===e);s?(o.value={title:s.title,date:o.value.date,content:s.content},sessionStorage.setItem(`article-${e}`,JSON.stringify(o.value))):o.value.content="文章未找到"}},S=(e,n)=>{I(n,e)},x=e=>{const n=p.value,{lineIndex:s}=e,a=n.$el.querySelector(`[data-v-md-line="${s}"]`);a&&n.scrollToTarget({target:a,scrollContainer:window,top:60})},C=()=>{const e=p.value;if(!e)return;const n=e.$el;if(!n)return;const s=n.querySelectorAll("h1, h2, h3, h4, h5, h6"),a=Array.from(s).filter(r=>r.innerText.trim());if(!a.length)return;const A=Array.from(new Set(a.map(r=>r.tagName))).sort();t.value=a.map(r=>({title:r.innerText,lineIndex:r.getAttribute("data-v-md-line"),indent:A.indexOf(r.tagName)}))};return k(()=>{l.params.title&&y(l.params.title).then(()=>{w(()=>{C()})})}),B(()=>o.value.content,e=>{e&&w(()=>{C()})}),{article:o,titles:t,handleCopyCodeSuccess:g,handleAnchorClick:x,handleImageClick:S,previewRef:p,isDesktop:_}}},z={class:"content-wrapper"},J={key:0,class:"anchor-navigation"},V=["onClick"],M={style:{cursor:"pointer"}},P={class:"content-container"},W={class:"content-header"},Z={class:"article-title"},$={class:"article-date"},j={key:1};function G(l,v,o,t,p,_){const h=O("v-md-preview");return i(),d("div",z,[t.isDesktop?(i(),d("nav",J,[(i(!0),d(D,null,E(t.titles,c=>(i(),d("div",{key:c.lineIndex,style:R({paddingLeft:`${c.indent*20}px`}),class:"anchor-item",onClick:g=>t.handleAnchorClick(c)},[m("a",M,u(c.title),1)],12,V))),128))])):b("",!0),m("div",P,[m("header",W,[m("h1",Z,u(t.article.title),1),m("p",$,"发布日期："+u(t.article.date),1)]),t.article.content?(i(),L(h,{onImageClick:t.handleImageClick,ref:"previewRef",onCopyCodeSuccess:t.handleCopyCodeSuccess,text:t.article.content,key:t.article.title},null,8,["onImageClick","onCopyCodeSuccess","text"])):(i(),d("p",j,"加载中..."))])])}const re=F(q,[["render",G],["__scopeId","data-v-3af9f99c"]]);export{re as default};
